<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title> &lt; lazycipher /&gt; Himanshu Singh</title>

    <!--Import Google Icon Font-->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    
    <link href="https://fonts.googleapis.com/css?family=Dokdo|Source+Code+Pro" rel="stylesheet"> 
    <!--Import materialize.css-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
    <!-- Font Awwesome -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css">
    <!-- Dev Icon Pack -->
    <link rel="stylesheet" href="https://cdn.rawgit.com/konpa/devicon/df6431e323547add1b4cf45992913f15286456d3/devicon.min.css">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="./css/style.css">

    <!--Let browser know website is optimized for mobile-->
</head>
<body>
    <div id="">
        <div class="navbar-fixed">
            <nav  class="nav-extended z-depth-3">
                <div class="nav-wrapper blue darken-4">
                    <!-- Left Side -->
                    <ul style="padding-left:10%;" class="left hide-on-med-and-down">
                        <!-- <li><a href="team.html">Cloud Research Team</a></li>                    -->
                        <li><a href="#about">about</a></li>
                        <li><a href="#skills">skills </a></li>
                        <li><a href="https://lazycipher.js.org/animint2-blog">animint2 blog </a></li>
                        <!-- <li><a href="#education">education & work</a></li> -->
                        
                    </ul>
        
                    <!-- Center -->
                    <a href="/" class="brand-logo center brandLogoResponsive"><span>&lt;lazycipher /&gt;</span> </a>
                    <a href="#" data-target="mobile-demo" class="sidenav-trigger pulse"><i class="material-icons ">menu</i></a>
                    
                    <!-- Right Size -->
                    <ul style="padding-right:10%;" class="right hide-on-med-and-down">
                        <!-- <li><a href="team.html">Cloud Research Team</a></li>                    -->
                        
                        <li><a href="#projects">projects</a></li>
                        <li><a href="#achievements">achievements</a></li>
                        <li><a href="./gsoc-commits.html">GSoC'20</a></li>
                    </ul>
                </div>
            </nav>
        </div>
        <ul class="sidenav" id="mobile-demo">
            <li class="brand-logo blue darken-4 center z-depth-3 valign-wrapper " style="height:250px; justify-content:center;">
                <img class="sideNavPhoto" src="img/lazycipher-Square-min.jpg">
            </li>
            <li class="blue darken-4 z-depth-3 center-align">
                <span style="display:block; color: white; font-size: 20px;">Himanshu Singh</span>
            </li>
            <li><a href="#home">home</a></li>
            <li><a href="#about">about</a></li>
            <!-- <li><a href="#education">education & work</a></li> -->
            <li><a href="#projects">projects</a></li>
            <li><a href="#skills">skills</a></li>
            <li><a href="#achievements">achievements</a></li>
            <li><a href="https://lazycipher.js.org/animint2-blog">animint2 blog </a></li>
            <li><a href="./gsoc-commits.html">GSoC'20</a></li>
        </ul>
        <!-- Contents -->
        <div class="container homeContainer">
            <div class="row center-align">
                <div class="col s12 container white z-depth-2">
                    <h4><b>GSoC 2020 @ R Project for Statistical Computing</b></h4>
                    <h5><b>{

                         Project: <a href="https://github.com/tdhock/animint2" target="_blank">Animint2</a> <br />
                         Evaluating Mentor: <a href="https://github.com/tdhock" target="_blank">Toby Dylan Hocking</a> <br />
                         Co-Mentor: <a href="https://github.com/faizan-khan-iit" target="_blank">Faizan Khan</a><br />
                         Student: <a href="https://github.com/lazycipher" target="_blank">Himanshu Singh</a>

                        }</b></h5>
                    <hr />
                    <div class="container blog-list">
                        <h5>Blog Posts written during coding period.</h5>
                        <ul class="collection">
                            <a href="https://lazycipher.js.org/animint2-blog/what-is-animint2/" target="_blank" class="collection-item">What's Animint?</a>
                            <a href="https://lazycipher.js.org/animint2-blog/animint2-testing/" target="_blank" class="collection-item">Testing Animint2!</a>
                            <a href="https://lazycipher.js.org/animint2-blog/coding-period-report-one/" target="_blank" class="collection-item">Coding Period Report 1</a>
                            <a href="https://lazycipher.js.org/animint2-blog/coding-period-report-two/" target="_blank" class="collection-item">Coding Period Report 2</a>
                            <a href="https://lazycipher.js.org/animint2-blog/coding-period-report-three/" target="_blank" class="collection-item">Coding Period Report 3</a>
                        </ul>
                    </div>
                    <hr />
                    <div class="container" id="commits">
                    </div>
                </div>
            </div>
        </div>
    </div>

    <footer >
        <div class="container">
            <div class="row">
                <div class="col s12 m2"></div>
                <div class="col s12 m8 center-align">
                    <p>Hey there! Thanks for checking out my website. Feel free to contact me :)  <br /><span class="lazycipher">~ lazycipher ~</span>
                    </p>
                </div>
                <div class="col s12 m2"></div>
            </div>
            <div class="row">
                <div class="col s1 m2"></div>
                <div class="col s12 m8 center-align">
                    <p style="color: rgb(100, 100, 100); padding-bottom: 10px !important; font-size: 12px;">&copy; <span class="copyrightYear"></span> All rights reserved.</p>
                </div>
                <div class="col s1 m2"></div>
            </div>
        </div>
    </footer>
</body>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
<script>

// $(window).on('load', function () {
//     $('#status').fadeOut();
//     $('#preloader').delay(350).fadeOut('slow');
//     $('body').delay(350).css({ 'overflow': 'visible' });
// })

$(document).ready(function () {
    $('.sidenav').sidenav();
    $('.fixed-action-btn').floatingActionButton();
    $('.slider').slider();
    $('.collapsible').collapsible();
    $('.copyrightYear').html(new Date().getFullYear());


    

    // const getData = async () => {
    //     const res = await getter();
    //     console.log(res);
    // }
    // GET: Commit List
    // params: PR Number
    // return: commits Array
    // let PR34 = getPR(34);
    // console.log(PR34)
    // $('#commits').html(`
    //     <h5><a href="${PR34.url}">${PR34.title}</a></h5>
    // `)

});

const PRs = [34, 42, 45, 46, 50];
let PRData = [];
let fetchPromises = [];
let elem = '';

function getter(PR) {
    return new Promise((resolve, reject) => {  
        let res;
        fetch(`https://api.github.com/repos/tdhock/animint2/pulls/${PR}`)
        .then(data => data.json())
        .then(data => {
            res = {
                title: data.title,
                url: data.url,
                additions: data.additions,
                deletions: data.deletions,
                merged: data.merged,
                html_url: data.html_url,
                number: data.number
            }
        })
        .then(() => {
            fetch(`https://api.github.com/repos/tdhock/animint2/pulls/${PR}/commits`)
            .then(data => data.json())
            .then(data => {
                resp = Object.assign({}, res, {commits: data});
                PRData.push(resp);
                resolve('SUCCESS');
            })
        })
    })
    
}

PRs.forEach(PR => {
  fetchPromises.push(getter(PR))
})
Promise.allSettled(fetchPromises).then(() => {
    PRData.forEach((data) => {
        let commitsElem = '';
        data.commits.forEach(commit => {
            let date = new Date(commit.commit.committer.date.toString())
            date = date.toLocaleDateString()
            commitsElem += `
                <li class="collection-item avatar">
                    <img src="${commit.author.avatar_url}" class="circle" width="30"/>
                    <span class="title"><b>${commit.commit.message}</b></span> 
                    <a style="color: blue" href="${'https://github.com/tdhock/animint2/commit/' + commit.sha}" target="_blank">
                        <div class="chip avatar z-depth-1 commit">
                        ${commit.sha.slice(0,7)}
                            <img style="margin: 5px; width:25px; height:auto;" src="./img/icons/commit.png" >
                        </div>
                    </a>
                    <br />
                    by <a class="author" href="${commit.author.html_url}" target="_blank">@${commit.author.login}</a> on ${date}
                </li>
            `
        })
        elem += `
        <p class="PR">PR#${data.number}: 
            <a href="${data.html_url}" target="_blank">${data.title}</a> 
            <a href="${data.html_url}" target="_blank">${data.merged===true?'<span style="color:white; background:#6f42c1" class="chip z-depth-1 avatar"> <img style="margin: 5px; width:25px; height:auto" src="./img/icons/merge1.png"/>Merged</span>':'<span style="color:white; background:#28a745" class="chip z-depth-1 avatar"> <img style="margin: 5px; width:25px; height:auto" src="./img/icons/PR.png"/>Open</span>'}</a>
            <span class="red-text">-${data.deletions}</span>
            <span class="green-text">+${data.additions}</span>
        </p>
        <ul class="collection">
            ${commitsElem}
        </ul>
        `
    })
  document.getElementById('commits').innerHTML = elem;
})
</script>
</html>
